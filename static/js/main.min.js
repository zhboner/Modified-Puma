+function(t){"use strict";function e(){var t=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in e){if(t.style[o]!==undefined){return{end:e[o]}}}return false}t.fn.emulateTransitionEnd=function(e){var o=false;var i=this;t(this).one("bsTransitionEnd",function(){o=true});var r=function(){if(!o)t(i).trigger(t.support.transition.end)};setTimeout(r,e);return this};t(function(){t.support.transition=e();if(!t.support.transition)return;t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(t){"use strict";function e(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null;this._$document=t(document);this._$window=t(window);this._$body=t(document.body);this._boundClick=t.proxy(this._clickHandler,this)}e.prototype.listen=function(){this._$body.on("click",".puma-image img",t.proxy(this._zoom,this))};e.prototype._zoom=function(e){var i=e.target;if(!i||i.tagName!="IMG")return;if(this._$body.hasClass("zoom-overlay-open"))return;if(e.metaKey||e.ctrlKey){return window.open(e.target.getAttribute("data-original")||e.target.src,"_blank")}if(i.width>=t(window).width()-o.OFFSET)return;this._activeZoomClose(true);this._activeZoom=new o(i);this._activeZoom.zoomImage();this._$window.on("scroll.zoom",t.proxy(this._scrollHandler,this));this._$document.on("keyup.zoom",t.proxy(this._keyHandler,this));this._$document.on("touchstart.zoom",t.proxy(this._touchStart,this));if(document.addEventListener){document.addEventListener("click",this._boundClick,true)}else{document.attachEvent("onclick",this._boundClick,true)}if("bubbles"in e){if(e.bubbles)e.stopPropagation()}else{e.cancelBubble=true}};e.prototype._activeZoomClose=function(t){if(!this._activeZoom)return;if(t){this._activeZoom.dispose()}else{this._activeZoom.close()}this._$window.off(".zoom");this._$document.off(".zoom");document.removeEventListener("click",this._boundClick,true);this._activeZoom=null};e.prototype._scrollHandler=function(e){if(this._initialScrollPosition===null)this._initialScrollPosition=t(window).scrollTop();var o=this._initialScrollPosition-t(window).scrollTop();if(Math.abs(o)>=40)this._activeZoomClose()};e.prototype._keyHandler=function(t){if(t.keyCode==27)this._activeZoomClose()};e.prototype._clickHandler=function(t){if(t.preventDefault)t.preventDefault();else event.returnValue=false;if("bubbles"in t){if(t.bubbles)t.stopPropagation()}else{t.cancelBubble=true}this._activeZoomClose()};e.prototype._touchStart=function(e){this._initialTouchPosition=e.touches[0].pageY;t(e.target).on("touchmove.zoom",t.proxy(this._touchMove,this))};e.prototype._touchMove=function(e){if(Math.abs(e.touches[0].pageY-this._initialTouchPosition)>10){this._activeZoomClose();t(e.target).off("touchmove.zoom")}};function o(e){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null;this._targetImage=e;this._$body=t(document.body)}o.OFFSET=80;o._MAX_WIDTH=2560;o._MAX_HEIGHT=4096;o.prototype.zoomImage=function(){var e=document.createElement("img");e.onload=t.proxy(function(){this._fullHeight=Number(e.height);this._fullWidth=Number(e.width);this._zoomOriginal()},this);e.src=this._targetImage.src};o.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div");this._targetImageWrap.className="zoom-img-wrap";this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage);this._targetImageWrap.appendChild(this._targetImage);t(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out");this._overlay=document.createElement("div");this._overlay.className="zoom-overlay";document.body.appendChild(this._overlay);this._calculateZoom();this._triggerAnimation()};o.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var e=this._fullWidth;var i=this._fullHeight;var r=t(window).scrollTop();var a=e/this._targetImage.width;var n=t(window).height()-o.OFFSET;var s=t(window).width()-o.OFFSET;var l=e/i;var m=s/n;if(e<s&&i<n){this._imgScaleFactor=a}else if(l<m){this._imgScaleFactor=n/i*a}else{this._imgScaleFactor=s/e*a}};o.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var e=t(this._targetImage).offset();var o=t(window).scrollTop();var i=o+t(window).height()/2;var r=t(window).width()/2;var a=e.top+this._targetImage.height/2;var n=e.left+this._targetImage.width/2;this._translateY=i-a;this._translateX=r-n;var s="scale("+this._imgScaleFactor+")";var l="translate("+this._translateX+"px, "+this._translateY+"px)";if(t.support.transition){l+=" translateZ(0)"}t(this._targetImage).css({"-webkit-transform":s,"-ms-transform":s,transform:s});t(this._targetImageWrap).css({"-webkit-transform":l,"-ms-transform":l,transform:l});this._$body.addClass("zoom-overlay-open")};o.prototype.close=function(){this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning");t(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""});t(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""});if(!t.support.transition){return this.dispose()}t(this._targetImage).one(t.support.transition.end,t.proxy(this.dispose,this)).emulateTransitionEnd(300)};o.prototype.dispose=function(){if(this._targetImageWrap&&this._targetImageWrap.parentNode){t(this._targetImage).removeClass("zoom-img").attr("data-action","zoom");this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap);this._overlay.parentNode.removeChild(this._overlay);this._$body.removeClass("zoom-overlay-transitioning")}};t(function(){(new e).listen()})}(jQuery);jQuery(document).ready(function(t){var e=t("#commentform"),o=t("#comments-title"),i=t("#cancel-comment-reply-link"),r=i.text();t(document).on("submit","#commentform",function(){t.ajax({url:PUMA.ajax_url,data:t(this).serialize()+"&action=ajax_comment",type:t(this).attr("method"),beforeSend:addComment.createButterbar("提交中...."),error:function(t){var e=addComment;e.createButterbar(t.responseText)},success:function(e){t("textarea").each(function(){this.value=""});var o=addComment,i=o.I("cancel-comment-reply-link"),r=o.I("wp-temp-form-div"),a=o.I(o.respondId),n=o.I("comment_post_ID").value,s=o.I("comment_parent").value;if(s!="0"){t("#respond").before('<ol class="children">'+e+"</ol>")}else if(!t(".commentlist").length){t("#respond").before('<ol class="commentlist">'+e+"</ol>")}else{t(".commentlist").append(e)}o.createButterbar("提交成功");i.style.display="none";i.onclick=null;o.I("comment_parent").value="0";if(r&&a){r.parentNode.insertBefore(a,r);r.parentNode.removeChild(r)}}});return false});addComment={moveForm:function(e,o,a){var n=this,s,l=n.I(e),m=n.I(a),c=n.I("cancel-comment-reply-link"),u=n.I("comment_parent"),d=n.I("comment_post_ID");i.text(r);n.respondId=a;if(!n.I("wp-temp-form-div")){s=document.createElement("div");s.id="wp-temp-form-div";s.style.display="none";m.parentNode.insertBefore(s,m)}!l?(temp=n.I("wp-temp-form-div"),n.I("comment_parent").value="0",temp.parentNode.insertBefore(m,temp),temp.parentNode.removeChild(temp)):l.parentNode.insertBefore(m,l.nextSibling);t("body").animate({scrollTop:t("#respond").offset().top-180},400);u.value=o;c.style.display="";c.onclick=function(){var t=addComment,e=t.I("wp-temp-form-div"),o=t.I(t.respondId);t.I("comment_parent").value="0";if(e&&o){e.parentNode.insertBefore(o,e);e.parentNode.removeChild(e)}this.style.display="none";this.onclick=null;return false};try{n.I("comment").focus()}catch(h){}return false},I:function(t){return document.getElementById(t)},clearButterbar:function(e){if(t(".butterBar").length>0){t(".butterBar").remove()}},createButterbar:function(e){var o=this;o.clearButterbar();t("body").append('<div class="butterBar butterBar--center"><p class="butterBar-message">'+e+"</p></div>");setTimeout("jQuery('.butterBar').remove()",3e3)}}});jQuery(window).scroll(function(){var t=jQuery(this).scrollTop(),e=jQuery(".back-to-top");if(t>200){e.removeClass("u-hide")}else{e.addClass("u-hide")}});var backToTop=function(){jQuery("html,body").animate({scrollTop:0},800)};jQuery(document).on("click",".termlike",function(){var t=jQuery(this);if(t.hasClass("is-active")){alert("您已经赞过啦")}else{t.addClass("is-active");jQuery.ajax({url:PUMA.ajax_url,data:t.data(),type:"POST",dataType:"json",success:function(e){if(e.status===200){t.find(".count").html(e.data)}else{alert("服务器正在努力找回自我")}}})}});